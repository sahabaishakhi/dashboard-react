{"version":3,"sources":["io/ianalytics/d4d/api/trend.cljs"],"mappings":";AAGA,AAAA;;;uCAAA,+CAAAA,tFAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,mEAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,mEAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,mEAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,mEAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,qEAAA,rEAAMD,gFAEFE,IAAIC,KAAKC;AAFb,AAEiB,sFAAA,/EAACC,mEAASH,IAAIC,KAAKC,QAAOE,YAAeA;;;AAF1D,CAAA,qEAAA,rEAAMN,gFAGFE,IAAIC,KAAKC,GAAGG;AAHhB,AAGsB,OAACF,mEAASH,IAAIC,KAAKC,GAAGG,KAAKD,YAAeA;;;AAHhE,CAAA,qEAAA,rEAAMN,gFAIFE,IAAIC,KAAKC,GAAGG,KAAKC;AAJrB,AAI+B,OAACH,mEAASH,IAAIC,KAAKC,GAAGG,KAAKC,SAASF;;;AAJnE,CAAA,qEAAA,rEAAMN,gFAKFE,IAAIC,KAAKC,GAAGG,KAAKC,SAASC;AAL9B,AAMG,IAAMC,WAAU,AAAcP;IACxBQ,SAAU,AAAcP;IACxBQ,MAAU,oCAAA,2DAAA,+DAAA,7JAAKC,yFAAkBX,0DAAaQ,6DAAgBC,QAC/C,wBAAA,gGAAA,tGAAMJ,MAAK,CAAA,2DAAA,NAAcA;IACxCO,WAAU,AAACC,aAAgBH;AAJjC,OAKME,AACA,cAAO,WAAKA,hCAQZ;AARO,AACE,GAAM,iEAAA,jEAACE,6CAAE,AAAUF;OACTA,AACA,PACA,gCAAON;;AAHjB,AAMM,QAACC,sCAAAA,oDAAAA,hBAAMK,gCAAAA;;;UACd,WAAKA;AAAL,AACE,mBAAA,mCAAA,qBAAA,eAAA,nFAACR,2CAA8CJ,gBACnBQ,iBAAiBC,YAAYG;;;;AAtB5E,CAAA,+DAAA,/DAAMd;;AAAN","names":["var_args","G__35814","io.ianalytics.d4d.api.trend/getTrend","js/Error","uid","from","to","io.ianalytics.d4d.api.trend.getTrend","js/console.log","intv","callback","error","iso-from","iso-to","url","io.ianalytics.d4d.api.core/API_URL","response","js/window.fetch","cljs.core._EQ_"],"sourcesContent":["(ns io.ianalytics.d4d.api.trend\r\n  (:require [io.ianalytics.d4d.api.core :refer [API_URL]]))\r\n\r\n(defn getTrend\r\n  \"\"\r\n  ([uid from to] (getTrend uid from to nil js/console.log js/console.log))\r\n  ([uid from to intv] (getTrend uid from to intv js/console.log js/console.log))\r\n  ([uid from to intv callback] (getTrend uid from to intv callback js/console.log))\r\n  ([uid from to intv callback error]\r\n   (let [iso-from  (.toISOString from)\r\n         iso-to    (.toISOString to)\r\n         url       (str API_URL \"/trend/\" uid \"?from=\" iso-from \"&to=\" iso-to\r\n                        (when intv (str \"&intv=\" intv \"s&aggr=mean&fill=linear\")))\r\n         response  (js/window.fetch url)]\r\n     (-> response\r\n         (.then (fn [response]\r\n                  (cond (= (.-status response) 200)\r\n                        (-> response\r\n                            (.json)\r\n                            (.then callback))\r\n\r\n                        :else\r\n                        (error response))))\r\n         (.catch (fn [response]\r\n                   (js/console.log \"Error getting trend with id \" uid\r\n                                   \" between \" iso-from \" and \" iso-to \": \" response)))))))\r\n"]}